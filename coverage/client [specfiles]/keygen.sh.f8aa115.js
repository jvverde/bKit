var data = {lines:[
{"lineNum":"    1","line":"#!/usr/bin/env bash"},
{"lineNum":"    2","line":"#Generate ssh keys and openssl keys"},
{"lineNum":"    3","line":"declare -r sdir=$(dirname -- \"$(readlink -fn -- \"$0\")\")\t#Full sdir","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    4","line":"[[ ${ETCDIR+isset} == isset ]] || source \"$sdir/functions/all.sh\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    5","line":""},
{"lineNum":"    6","line":"pushd \"$sdir\" >/dev/null","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    7","line":""},
{"lineNum":"    8","line":"usage() {"},
{"lineNum":"    9","line":"        echo -e \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   10","line":"        local name=$(basename -s .sh \"$0\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   11","line":"        echo -e \"Usage:\\n\\t $name [-n|--new] servername\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   12","line":"        exit 1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   13","line":"}"},
{"lineNum":"   14","line":"while [[ $1 =~ ^- ]]","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   15","line":"do"},
{"lineNum":"   16","line":"        key=\"$1\" && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   17","line":"        case \"$key\" in","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   18","line":"                -h|--help)"},
{"lineNum":"   19","line":"                        usage","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   20","line":"                ;;"},
{"lineNum":"   21","line":"                -n|--new)"},
{"lineNum":"   22","line":"                \tdeclare -r new=new","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   23","line":"                ;;"},
{"lineNum":"   24","line":"                *)"},
{"lineNum":"   25","line":"\t\t\tusage wrong options $key","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   26","line":"                ;;"},
{"lineNum":"   27","line":"        esac"},
{"lineNum":"   28","line":"done"},
{"lineNum":"   29","line":""},
{"lineNum":"   30","line":"[[ -n $1 ]] || usage \"Servername missing\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   31","line":""},
{"lineNum":"   32","line":"declare -r confdir=\"${2:-\"$ETCDIR/$1\"}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   33","line":"declare -r priv=\"$confdir/.priv\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   34","line":"declare -r pub=\"$confdir/pub\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   35","line":"echo $priv","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   36","line":"[[ -e $priv ]] || mkdir -pv \"$priv\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   37","line":"chmod 700 \"$priv\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   38","line":"[[ -e $pub ]] || mkdir -pv \"$pub\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   39","line":""},
{"lineNum":"   40","line":"declare -r keyssh=\"$priv/ssh.key\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   41","line":"declare -r pubssh=\"$pub/ssh-client.pub\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   42","line":""},
{"lineNum":"   43","line":"[[ -e $keyssh && -n $new ]] && rm \"$keyssh\" #rm if exists and new is requested","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   44","line":""},
{"lineNum":"   45","line":"[[ -e $keyssh ]] || ssh-keygen -b 256 -t ecdsa -f \"$keyssh\" -q -N \"\" -C \"key from $BKITUSER@$(hostname -f) to $1\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   46","line":"chmod 600 \"$priv\"/*","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   47","line":""},
{"lineNum":"   48","line":"echo Extract public ssh key from private key","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   49","line":"ssh-keygen -f \"$keyssh\" -y > \"$pubssh\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   50","line":""},
{"lineNum":"   51","line":"{"},
{"lineNum":"   52","line":"        echo Generate a private key for openssl","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   53","line":"\topenssl ecparam -name secp256k1 -genkey -noout -out \"$priv/key.pem\" || { echo \"Fail to generate key\" && exit 1; }","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   54","line":"        echo Extract the public key to \"$pub/client.pub\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   55","line":"\topenssl ec -in \"$priv/key.pem\" -pubout -out \"$pub/client.pub\" || { echo \"Fail to get public key\" && exit 1; }","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   56","line":"#} > /dev/null  2>&1"},
{"lineNum":"   57","line":"}"},
{"lineNum":"   58","line":"chmod 700 \"$ETCDIR\" \"$confdir\" \"$priv\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   59","line":"chmod 600 \"$priv\"/*","class":"lineNoCov","hits":"0","possible_hits":"0",},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "shellspec spec", "date" : "2020-07-07 12:21:07", "instrumented" : 34, "covered" : 0,};
var merged_data = [];
