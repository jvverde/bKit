var data = {lines:[
{"lineNum":"    1","line":"#!/usr/bin/env bash"},
{"lineNum":"    2","line":"sdir=\"$(dirname -- \"$(readlink -ne -- \"$0\")\")\"\t\t\t\t#Full DIR","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    3","line":"source \"$sdir/lib/functions/all.sh\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    4","line":""},
{"lineNum":"    5","line":"usage(){"},
{"lineNum":"    6","line":"\t[[ $OS == cygwin ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    7","line":"\t\tdie \"Usage:\\n\\t$0 --name taskname [-m|-h|-d|-w [every]] [-f|--filter=rules] [-s|--start=stardatetime] [--install] [--force] dirs\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"    8","line":"\t}"},
{"lineNum":"    9","line":"\t[[ $OS != cygwin ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   10","line":"\t\tdie \"Usage:\\n\\t$0 --name taskname [-m onminute] [-h onhour] -[d onday ] [-w onweek ] [-f|--filter=rules] [-s|--start=stardatetime] [--install] [--force] dirs\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   11","line":"\t}"},
{"lineNum":"   12","line":"}"},
{"lineNum":"   13","line":""},
{"lineNum":"   14","line":"# [[ $OS == cygwin || $UID -eq 0 ]] || exec sudo \"$0\" \"$@\""},
{"lineNum":"   15","line":"# [[ $OS == cygwin ]] && !(id -G|grep -qE \'\\b544\\b\') && {"},
{"lineNum":"   16","line":"# \t#https://cygwin.com/ml/cygwin/2015-02/msg00057.html"},
{"lineNum":"   17","line":"# \techo I am to going to runas Administrator"},
{"lineNum":"   18","line":"# \tcygstart -w --action=runas /bin/bash bash \"$0\" \"$@\" && exit"},
{"lineNum":"   19","line":"# }"},
{"lineNum":"   20","line":""},
{"lineNum":"   21","line":"ONALL=\'*\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   22","line":"MINUTE=ONALL","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   23","line":"HOUR=ONALL","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   24","line":"DAYOFMONTH=ONALL","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   25","line":"MONTH=ONALL","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   26","line":"DAYOFWEEK=ONALL","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   27","line":"EVERY=1 #for windows only","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   28","line":"START=$(date -u)","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   29","line":"let ONMINUTES=$RANDOM%60","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   30","line":"let ONHOURS=$RANDOM%24","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   31","line":"let ONDAYOFWEEK=$RANDOM%7","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   32","line":"let ONDAYOFMONTH=1+$RANDOM%28","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   33","line":"let ONMONTHS=1+$RANDOM%12","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   34","line":"FILTERS=()"},
{"lineNum":"   35","line":"OLDIFS=$IFS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   36","line":"IFS=\""},
{"lineNum":"   37","line":"\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   38","line":"OPTIONS=(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   39","line":"  \'--no-ask\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   40","line":"  \'--compile\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   41","line":"  \'--notify\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   42","line":")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   43","line":""},
{"lineNum":"   44","line":"while [[ $1 =~ ^- ]]","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   45","line":"do"},
{"lineNum":"   46","line":"\tKEY=\"$1\" && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   47","line":"\tcase \"$KEY\" in","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   48","line":"\t\t-m|--minute)"},
{"lineNum":"   49","line":"\t\t\tSCHTYPE=MINUTE","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   50","line":"\t\t\t[[ $# -gt 1 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   51","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && (( $1 < 1440 && $1 > 0 )) && EVERY=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   52","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && ONMINUTES=\"$1\" && shift && MINUTE=ONMINUTES","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   53","line":"\t\t;;"},
{"lineNum":"   54","line":"\t\t-h|--hour)"},
{"lineNum":"   55","line":"\t\t\tSCHTYPE=HOURLY","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   56","line":"\t\t\t[[ $# -gt 1 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   57","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && (( $1 < 24 && $1 > 0 )) && EVERY=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   58","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && ONHOURS=\"$1\" && shift && HOUR=ONHOURS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   59","line":"\t\t\tMINUTE=ONMINUTES","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   60","line":"\t\t;;"},
{"lineNum":"   61","line":"\t\t-d|--day)"},
{"lineNum":"   62","line":"\t\t\tSCHTYPE=DAILY","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   63","line":"\t\t\t[[ $# -gt 1 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   64","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && (( $1 < 366 && $1 > 0 )) && EVERY=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   65","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && ONDAYOFMONTH=\"$1\" && shift && DAYOFMONTH=ONDAYOFMONTH","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   66","line":"\t\t\tMINUTE=ONMINUTES","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   67","line":"\t\t\tHOUR=ONHOURS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   68","line":"\t\t;;"},
{"lineNum":"   69","line":"\t\t-w|--week)"},
{"lineNum":"   70","line":"\t\t\tSCHTYPE=WEEKLY","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   71","line":"\t\t\t[[ $# -gt 1 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   72","line":"\t\t\t(( $1 < 53 && $1 > 0 )) && EVERY=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   73","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && ONDAYOFWEEK=\"$1\" && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   74","line":"\t\t\tMINUTE=ONMINUTES","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   75","line":"\t\t\tHOUR=ONHOURS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   76","line":"\t\t\tDAYOFWEEK=ONDAYOFWEEK","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   77","line":"\t\t;;"},
{"lineNum":"   78","line":"\t\t-M|--monthly)"},
{"lineNum":"   79","line":"\t\t\tSCHTYPE=MONTHLY","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   80","line":"\t\t\t[[ $# -gt 1 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   81","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && (( $1 < 12 && $1 > 0 )) && EVERY=$1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   82","line":"\t\t\t[[ \"$1\" =~ ^[0-9,*/-]+$ ]] && ONMONTHS=$1 && shift && MONTH=ONMONTHS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   83","line":"\t\t\tMINUTE=ONMINUTES","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   84","line":"\t\t\tHOUR=ONHOURS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   85","line":"\t\t\tDAYOFMONTH=ONDAYOFMONTH","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   86","line":"\t\t;;"},
{"lineNum":"   87","line":"    --email=*)"},
{"lineNum":"   88","line":"      OPTIONS+=( \"$KEY\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   89","line":"    ;;"},
{"lineNum":"   90","line":"    --email)"},
{"lineNum":"   91","line":"      OPTIONS+=( \"$KEY=$1\" ) && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   92","line":"    ;;"},
{"lineNum":"   93","line":"\t\t-n|--name)"},
{"lineNum":"   94","line":"\t\t\tNAME=\"$1\" && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   95","line":"\t\t;;"},
{"lineNum":"   96","line":"\t\t-n=*|--name=*)"},
{"lineNum":"   97","line":"\t\t\tNAME=${KEY#*=}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"   98","line":"\t\t;;"},
{"lineNum":"   99","line":"\t\t-s|--start)"},
{"lineNum":"  100","line":"\t\t\tSTART=$(date -d \"$1\" -u) && shift || die Wrong date format","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  101","line":"\t\t;;"},
{"lineNum":"  102","line":"\t\t-s=*|--start=*)"},
{"lineNum":"  103","line":"\t\t\tSTART=$(date -d \"${KEY#*=}\" -u) || die Wrong date format","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  104","line":"\t\t;;"},
{"lineNum":"  105","line":"\t\t-f|--filter)"},
{"lineNum":"  106","line":"\t\t\tFILTERS+=(\"$1\") && shift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  107","line":"    ;;"},
{"lineNum":"  108","line":"    -f=*|--filter=*)"},
{"lineNum":"  109","line":"\t\t\tFILTERS+=(\"${KEY#*=}\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  110","line":"    ;;"},
{"lineNum":"  111","line":"    --filters-from)"},
{"lineNum":"  112","line":"\t\t\t[[ -e $1 ]] || die \"Can\'t find \'$1\'\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  113","line":"\t\t\tFILTERS+=( $(cat \"$1\") )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  114","line":"\t\t\tshift","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  115","line":"\t\t;;"},
{"lineNum":"  116","line":"    --filters-from=*)"},
{"lineNum":"  117","line":"\t\t\tFILE=\"${KEY#*=}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  118","line":"\t\t\t[[ -e $FILE ]] || die \"Can\'t find $FILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  119","line":"\t\t\tFILTERS+=( $(cat \"$FILE\") )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  120","line":"\t\t;;"},
{"lineNum":"  121","line":"\t\t--install)"},
{"lineNum":"  122","line":"\t\t\tINSTALL=\"I\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  123","line":"\t\t;;"},
{"lineNum":"  124","line":"\t\t--force)"},
{"lineNum":"  125","line":"\t\t\tFORCE=\"F\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  126","line":"\t\t;;"},
{"lineNum":"  127","line":"\t\t--help)"},
{"lineNum":"  128","line":"\t\t\tusage","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  129","line":"\t\t;;"},
{"lineNum":"  130","line":"\t\t*)"},
{"lineNum":"  131","line":"\t\t\techo Unknow\toption $KEY && usage","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  132","line":"\t\t;;"},
{"lineNum":"  133","line":"\tesac"},
{"lineNum":"  134","line":"done"},
{"lineNum":"  135","line":""},
{"lineNum":"  136","line":"[[ $# -eq 0 ]] && usage","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  137","line":""},
{"lineNum":"  138","line":"IFS=$OLDIFS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  139","line":""},
{"lineNum":"  140","line":"CURRENTTIME=$(date +%Y-%m-%dT%H-%M-%S)","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  141","line":"FILTERDIR=\"$VARDIR/filters\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  142","line":"[[ -d $FILTERDIR ]] || mkdir -pv \"$FILTERDIR\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  143","line":""},
{"lineNum":"  144","line":"TASKNAME=\"BKIT-${NAME:-$CURRENTTIME}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  145","line":""},
{"lineNum":"  146","line":"TASKDIR=\"$VARDIR/cronjobs\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  147","line":"[[ $OS == cygwin ]] && TASKDIR=\"$VARDIR/schtasks\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  148","line":""},
{"lineNum":"  149","line":"[[ -d $TASKDIR ]] || mkdir -pv \"$TASKDIR\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  150","line":"JOBFILE=\"${TASKDIR}/${TASKNAME}.sh\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  151","line":"[[ $OS == cygwin ]] && JOBFILE=\"${TASKDIR}/${TASKNAME}.bat\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  152","line":""},
{"lineNum":"  153","line":"[[ -e $JOBFILE && -z $FORCE ]] && die \"\'$JOBFILE\' already exists\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  154","line":":> \"$JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  155","line":""},
{"lineNum":"  156","line":"#RDIR=$(realpath -m --relative-to=\"$TASKDIR\" \"$sdir\")"},
{"lineNum":"  157","line":"RDIR=\"$sdir\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  158","line":""},
{"lineNum":"  159","line":"[[ $OS == cygwin ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  160","line":"\tRDIR=\"$(realpath -m --relative-to=\"$TASKDIR\" \"$sdir\")\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  161","line":"\t# WBASH=\"$(cygpath -w \"$BASH\")\""},
{"lineNum":"  162","line":"\t# DOSBASH=\"$(realpath --relative-to=\"$(cygpath -w \"$TASKDIR\")\" \"$WBASH\")\""},
{"lineNum":"  163","line":"\t# DOSBASH=\"${DOSBASH%.exe}\" #just in case"},
{"lineNum":"  164","line":"\t#CMD=\'\"\'${DOSBASH}.exe\'\" \"\'${sdir}/skit.sh\'\"\'"},
{"lineNum":"  165","line":"\tCMD=\'call \"\'$(cygpath -w \"${sdir}\")\\\\skit.bat\'\"\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  166","line":"\techo \'@echo OFF\'> \"$JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  167","line":"}"},
{"lineNum":"  168","line":""},
{"lineNum":"  169","line":""},
{"lineNum":"  170","line":"declare -A ROOTS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  171","line":"declare -A ROOTOF","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  172","line":"declare -A RPATHS","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  173","line":""},
{"lineNum":"  174","line":"for DIR in \"$@\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  175","line":"do"},
{"lineNum":"  176","line":"    FULL=$(readlink -ne \"$DIR\") || { warn $DIR \"doesn\'t exists\" && continue ;}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  177","line":"    exists cygpath && FULL=$(cygpath -u \"$FULL\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  178","line":"    [[ -e $FULL ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  179","line":"    ROOT=$(stat -c%m \"$FULL\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  180","line":"    [[ -e $ROOT ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  181","line":"    ROOTS[\"$ROOT\"]=1","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  182","line":"    REL=${FULL#$ROOT}\t#path relative to root","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  183","line":"    ROOTOF[\"$FULL\"]=\"$ROOT\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  184","line":"    RPATHS[\"$FULL\"]=\"/${REL#/}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  185","line":"done"},
{"lineNum":"  186","line":""},
{"lineNum":"  187","line":"for ROOT in ${!ROOTS[@]}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  188","line":"do"},
{"lineNum":"  189","line":"\tROOTFILTERS=()"},
{"lineNum":"  190","line":"\tBACKUPDIR=()"},
{"lineNum":"  191","line":"  for DIR in \"${!ROOTOF[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  192","line":"  do"},
{"lineNum":"  193","line":"      [[ $ROOT == ${ROOTOF[$DIR]} ]] && BACKUPDIR+=( \"\'${RPATHS[\"$DIR\"]}\'\" )","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  194","line":"  done"},
{"lineNum":"  195","line":"  [[ ${#BACKUPDIR[@]} -gt 0 ]] || continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  196","line":"  #echo ROOT:$ROOT"},
{"lineNum":"  197","line":"  for F in \"${FILTERS[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  198","line":"  do"},
{"lineNum":"  199","line":"  \t#echo F:$F"},
{"lineNum":"  200","line":"  \t#DIR=${F:2}"},
{"lineNum":"  201","line":"  \tDIR=${F#* } #START AFTER FIRST SPACE","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  202","line":"  \tP=${F%% *}\t#P is the rule","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  203","line":"  \tset -f","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  204","line":"  \texists cygpath && [[ $DIR =~ ^[a-zA-Z]: || $DIR =~ \\\\ ]] && DIR=$(cygpath -u \"$DIR\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  205","line":""},
{"lineNum":"  206","line":"  \t#echo B:$DIR"},
{"lineNum":"  207","line":"  \t[[ ! $DIR =~ ^/ ]] && ROOTFILTERS+=( \"${P} $DIR\" ) && continue #if not start on root","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  208","line":"  \tBASE=${DIR%\\**}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  209","line":"\t\tuntil [[ -d $BASE ]]\t\t\t#find a path base if $BASE not exist at this time","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  210","line":"\t\tdo"},
{"lineNum":"  211","line":"\t\t\tBASE=$(dirname \"$BASE\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  212","line":"\t\tdone"},
{"lineNum":"  213","line":"  \tR=$(stat -c%m \"$BASE\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  214","line":"  \t[[ $R == $ROOT ]] && ROOTFILTERS+=( \"${P} $DIR\" ) #only filters with same mountpoint","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  215","line":"  done"},
{"lineNum":"  216","line":"\t#echo \"${ROOTFILTERS[@]}\""},
{"lineNum":"  217","line":""},
{"lineNum":"  218","line":"\tUUID=$(bash \"$sdir/lib/getUUID.sh\" \"$ROOT\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  219","line":"\t[[ $UUID == _ ]] && continue","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  220","line":""},
{"lineNum":"  221","line":"  DRIVE=\"${ROOT//\\//.}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  222","line":"  #DRIVE=\"${ROOT}\""},
{"lineNum":"  223","line":"\t[[ $OS == cygwin ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  224","line":"\t\tDRIVE=$(cygpath -w \"$ROOT\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  225","line":"\t\tDRIVE=${DRIVE:0:1}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  226","line":"\t\tDRIVE=${DRIVE^^}","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  227","line":"\t}"},
{"lineNum":"  228","line":""},
{"lineNum":"  229","line":"\tFILTERNAME=\"${TASKNAME}-${DRIVE}-${UUID}.lst\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  230","line":"\tFILTERFILE=\"${FILTERDIR}/$FILTERNAME\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  231","line":""},
{"lineNum":"  232","line":"\techo \"#Filter rules used by cronjob $JOBFILE. Don\'t remove this file\" > \"$FILTERFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  233","line":"\t[[ $OS == cygwin ]] && echo \"#Filter rules used in \'$(cygpath -w \"$JOBFILE\")\'. Don\'t remove this file\" > \"$FILTERFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  234","line":""},
{"lineNum":"  235","line":"\tfor F in \"${ROOTFILTERS[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  236","line":"\tdo"},
{"lineNum":"  237","line":"\t\techo \"$F\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  238","line":"\tdone >> \"$FILTERFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  239","line":"\tLOGBASE=\"$VARDIR/log/${TASKNAME,,}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  240","line":"\tLOGDIR=\"$LOGBASE/${DRIVE}/\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  241","line":"\tmkdir -pv \"$LOGDIR\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  242","line":""},
{"lineNum":"  243","line":"  exists cygpath &&  WLOGDIR=\"$(cygpath -w \"$LOGDIR\")\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  244","line":""},
{"lineNum":"  245","line":"  ROPTIONS=(","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  246","line":"    \"${OPTIONS[@]}\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  247","line":"\t\t\'--uuid \"\'$UUID\'\"\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  248","line":"\t\t\'--logdir \"\'$LOGDIR\'\"\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  249","line":"\t)"},
{"lineNum":"  250","line":""},
{"lineNum":"  251","line":"\t{"},
{"lineNum":"  252","line":"\t\t#FILTERLOCATION=$(realpath -m --relative-to=\"$TASKDIR\" \"$FILTERFILE\")"},
{"lineNum":"  253","line":"\t\tFILTERLOCATION=\"$FILTERFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  254","line":"\t\tif [[ $OS == cygwin ]]","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  255","line":"\t\tthen"},
{"lineNum":"  256","line":"\t\t\t#FILTERLOCATION=$(realpath -m --relative-to=\"$TASKDIR\" \"$FILTERFILE\")"},
{"lineNum":"  257","line":"\t\t\ttasklog=\"$(cygpath -w \"$LOGBASE/task.log\")\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  258","line":"\t\t\tcat <<EOF","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  259","line":">> \"$tasklog\" 2>&1 ("},
{"lineNum":"  260","line":"  REM tasklog=\'$tasklog\'"},
{"lineNum":"  261","line":"  REM logdir=\'$WLOGDIR\'"},
{"lineNum":"  262","line":"  REM filters=\'${FILTERLOCATION}\'"},
{"lineNum":"  263","line":"  REM uuid=\'$UUID\'"},
{"lineNum":"  264","line":"  REM drive=\'$(cygpath -w \"$ROOT\")\'"},
{"lineNum":"  265","line":"  REM path=${BACKUPDIR[@]}"},
{"lineNum":"  266","line":"\techo Snapshot of ${BACKUPDIR[@]} on DRIVE $(cygpath -w \"$ROOT\")"},
{"lineNum":"  267","line":"\techo See Logs on folder $WLOGDIR"},
{"lineNum":"  268","line":"\tpushd \"%~dp0\""},
{"lineNum":"  269","line":"\t$CMD ${ROPTIONS[@]}  -- --filter=\'. $FILTERLOCATION\' ${BACKUPDIR[@]:-/}"},
{"lineNum":"  270","line":"\tpopd"},
{"lineNum":"  271","line":")"},
{"lineNum":"  272","line":"EOF"},
{"lineNum":"  273","line":"\t\telse"},
{"lineNum":"  274","line":"      cat <<EOF","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  275","line":"#!/usr/bin/env bash"},
{"lineNum":"  276","line":"#Backup of ${BACKUPDIR[@]} under current mointing point $ROOT"},
{"lineNum":"  277","line":"#Logs on folder $LOGDIR"},
{"lineNum":"  278","line":"pushd \"\\$(dirname \"\\$(readlink -f \"\\$0\")\")\" >/dev/null"},
{"lineNum":"  279","line":"/bin/bash \'$sdir/skit.sh\' ${ROPTIONS[@]}  -- --filter=\'. $FILTERLOCATION\' ${BACKUPDIR[@]:-/}"},
{"lineNum":"  280","line":"popd >/dev/null"},
{"lineNum":"  281","line":"EOF"},
{"lineNum":"  282","line":""},
{"lineNum":"  283","line":"\t\tfi"},
{"lineNum":"  284","line":"\t} >> \"$JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  285","line":"  chmod 755 \"$JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  286","line":"done"},
{"lineNum":"  287","line":""},
{"lineNum":"  288","line":"[[ -n $INSTALL ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  289","line":"\tif [[ $OS == cygwin ]]","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  290","line":"\tthen"},
{"lineNum":"  291","line":"    (id -G|grep -qE \'\\b544\\b\') && declare -r isadmin=\"yes\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  292","line":"\t\techo \"Create a batch file in $JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  293","line":"\t\tTASCMD=\'\"\'$(cygpath -w \"$JOBFILE\")\'\"\'","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  294","line":"\t\tST=$(date -d \"$START\" +\"%H:%M:%S\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  295","line":"\t\t#http://www.robvanderwoude.com/datetimentparse.php"},
{"lineNum":"  296","line":"\t\t#schtasks /CREATE /RU \"SYSTEM\" /SC $SCHTYPE /MO $EVERY /ST \"$ST\" /SD \"$SD\" /TN \"$TASKNAME\" /TR \"$TASCMD\""},
{"lineNum":"  297","line":"\t\tlet FORMAT=$(REG QUERY \"HKCU\\Control Panel\\International\"|fgrep -i \"iDate\"|grep -Po \"\\d\")","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  298","line":"\t\t(($FORMAT == 0)) && SD=$(date -d \"$START\" +\"%m/%d/%Y\")"},
{"lineNum":"  299","line":"\t\t(($FORMAT == 1)) && SD=$(date -d \"$START\" +\"%d/%m/%Y\")"},
{"lineNum":"  300","line":"\t\t(($FORMAT == 2)) && SD=$(date -d \"$START\" +\"%Y/%m/%d\")"},
{"lineNum":"  301","line":"    echo schtasks /CREATE ${isadmin+/RU \"SYSTEM\"} /SC $SCHTYPE /MO ${EVERY:-1} /ST \"$ST\" /SD \"$SD\" /TN \"$TASKNAME\" /TR \"$TASCMD\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  302","line":"    schtasks /CREATE ${isadmin+/RU \"SYSTEM\"} /SC $SCHTYPE /MO ${EVERY:-1} /ST \"$ST\" /SD \"$SD\" /TN \"$TASKNAME\" /TR \"$TASCMD\" || die \"Error calling windows schtasks\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  303","line":"\t\techo \"These are your bKit schedule tasks now\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  304","line":"\t\tschtasks /QUERY|fgrep BKIT","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  305","line":"    #https://web.archive.org/web/20111202234528/http://support.microsoft.com/kb/220167"},
{"lineNum":"  306","line":"    [[ ${isadmin+isset} == isset ]] && {","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  307","line":"      icacls \"$(cygpath -w \"$VARDIR\")\" /grant SYSTEM:\\(OI\\)\\(CI\\)\\(F\\) /T","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  308","line":"      mkdir -pv /home/SYSTEM","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  309","line":"    }"},
{"lineNum":"  310","line":"\telse"},
{"lineNum":"  311","line":"\t\techo \"Create a job file in $JOBFILE\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  312","line":"\t\tJOB=\"${!MINUTE} ${!HOUR} ${!DAYOFMONTH} ${!MONTH} ${!DAYOFWEEK} /usr/bin/flock -n \'$TASKDIR/.lock.$TASKNAME\' -c \'$JOBFILE\' || echo \'$TASKDIR/.lock.$TASKNAME\' is locked\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  313","line":"\t\t{ #add this nJOBE to existing ones","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  314","line":"\t\t\tcrontab -l 2>/dev/null","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  315","line":"\t\t\techo \"$JOB\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  316","line":"\t\t} | sort -u | crontab","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  317","line":"\t\techo \"These are your bKit jobs now\"","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  318","line":"\t\tcrontab -l|fgrep BKIT #show all BKIT jobs","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  319","line":"\tfi"},
{"lineNum":"  320","line":"}"},
{"lineNum":"  321","line":"echo done","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  322","line":"exit 0","class":"lineNoCov","hits":"0","possible_hits":"0",},
{"lineNum":"  323","line":"#cat \"$JOBFILE\""},
]};
var percent_low = 25;var percent_high = 75;
var header = { "command" : "shellspec spec", "date" : "2020-07-07 12:21:07", "instrumented" : 175, "covered" : 0,};
var merged_data = [];
